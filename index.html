<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="pro.css">
    <title>TODO LIst</title>
</head>

<body>
    <div id="container">
        
        <text class="title">Add Your List of Future Works</text>
        <div class="innercontainer">
            <input placeholder="Subject1" id="subj" class="for_all" spellcheck="true" value="">
            <textarea placeholder="Desciption" id="desc" class="for_all" spellcheck="true" value=""></textarea>
            <input type="date" class="for_all" id="date" value="" >
            <div class="buttons">
                <button id="b1" onclick="clicked1()">Add</button>
                <button id="b2" onclick="Clear1()">Clear</button>
            </div>
        </div>
        <table class="table">
            <thead>
              <tr>
                <th >Serial number</th>
                <th >Title</th>
                <th >Description</th>
                <th >Date</th>
                <th >Button </th>
              </tr>
            </thead>
            <tbody id="values">
              <tr>
                <th><text>1</text></th>
                <td><text>Title</text></td>
                <td><text>Description </text></td>
                <td><text>Today</text></td>
                <td><button onclick="delete1()">Delete</button></td>
              </tr>
            </tbody>
          </table>
    </div>
    <script>
        function clicked1() {
            console.log("call");
            Subject1 = document.getElementById("subj").value;
            Description = document.getElementById("desc").value;
            Date1 = document.getElementById("date").value;
            let Arrayofitems = []
            if (localStorage.getItem('itemsJson') == null) {
                Arrayofitems.push([Subject1, Description, Date1]);
                localStorage.setItem('itemsJson', JSON.stringify(Arrayofitems));
            }
            else {
                JsonString = localStorage.getItem('itemsJson')
                Arrayofitems = JSON.parse(JsonString);
                Arrayofitems.push([Subject1, Description, Date1]);
                localStorage.setItem('itemsJson', JSON.stringify(Arrayofitems));
            }
            update()

        }
        function update() 
        {
            table_content = document.getElementById('values');
            if (localStorage.getItem('itemsJson') != null) {
                JsonString = localStorage.getItem('itemsJson');
                Arrayofitems = JSON.parse(JsonString);
                
                str = ''
                Arrayofitems.forEach((element, index) => {
                    str += `
               <tr>
                <th><text>${index + 1}</text></th>
                <td><text>${element[0]}</text></td>
                <td><text>${element[1]}</text></td>
                <td><text>${element[2]}</text></td>
                <td><button onclick="delete1(${index})">Delete</button></td>
                </tr>
               `
                });
                table_content.innerHTML = str;
            }
        }
        function delete1(index) {
            JsonString1 = localStorage.getItem('itemsJson');
            array = JSON.parse(JsonString1);
            array.splice(index, 1);
            console.log(array);
            localStorage.setItem('itemsJson', JSON.stringify(array));
            update();
        }
        function Clear1() 
        {
            table_content = document.getElementById('values')
            table_content.innerHTML="";
            localStorage.clear();
        }

        update();
    </script>

</body>

</html>
